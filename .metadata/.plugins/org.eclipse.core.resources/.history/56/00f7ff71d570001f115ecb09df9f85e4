<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1" isELIgnored="false"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html>
<html>
<head>
    <title>Update Grocery</title>
</head>
<body>
    <h2>Update Grocery Item</h2>

    <form action="${pageContext.request.contextPath}/groceries/edit" method="post" enctype="multipart/form-data">
        <input type="hidden" name="id" value="${grocery.grocery_id}">
        <div>
            <label for="groceryName">Grocery Name:</label>
            <input type="text" id="groceryName" name="groceryName" value="${grocery.groceryName}" required>
        </div>
        <div>
            <label for="description">Description:</label>
            <textarea id="description" name="description" rows="4" required>${grocery.description}</textarea>
        </div>
        <div>
            <label for="grocery_price">Price:</label>
            <input type="text" id="grocery_price" name="grocery_price" value="${grocery.grocery_price}" required>
        </div>
        <div>
            <label for="in_stock">In Stock:</label>
            <input type="number" id="in_stock" name="in_stock" value="${grocery.in_stock}" required>
        </div>
        <div>
            <label for="category_id">Category:</label>
            <select id="category_id" name="category_id" required>
                <c:forEach items="${categories}" var="category">
                    <option value="${category.category_id}" <c:if test="${category.category_id == grocery.category.category_id}">selected</c:if>>${category.category_name}</option>
                </c:forEach>
            </select>
        </div>
        <div>
            <label for="imageURL">Image:</label>
            <input type="file" id="imageURL" name="imageURL">
            <c:if test="${not empty grocery.imageURL}">
                <p>Current Image: <img src="${pageContext.request.contextPath}/uploaded/${grocery.imageURL}" alt="Grocery Image" style="max-width: 200px;"></p>
            </c:if>
        </div>
        <div>
            <input type="submit" value="Update Grocery">
        </div>
    </form>

    <c:if test="${not empty message}">
        <p>${message}</p>
    </c:if>

    <a href="${pageContext.request.contextPath}/groceries/list">Back to Grocery List</a>
</body>
</html>
